// translations.js - Localization support for HeadSynth
export const translations = {
    en: {
      // Main UI
      appTitle: "HeadSynth - Head Controlled Synthesizer",
      startCamera: "Start Camera",
      stopCamera: "Stop Camera",
      calibrateCamera: "Calibrate Camera",
      activatingCamera: "Activating Camera...",
      cameraInstructions: "Click 'Start Camera' to begin",
      
      // Instrument & Scale
      basicSynth: "Basic Synthesizer",
      amSynth: "AM Synth",
      fmSynth: "FM Synth",
      pluck: "Pluck",
      piano: "Piano",
      
      majorScale: "Major Scale",
      minorScale: "Minor Scale",
      pentatonicScale: "Pentatonic",
      bluesScale: "Blues",
      chromaticScale: "Chromatic",
      
      // Controls
      volume: "Volume",
      reverb: "Reverb Effect",
      
      // Status
      note: "Note",
      mode: "Mode",
      playing: "Playing",
      paused: "Paused",
      headPosition: "Head Position",
      
      // Looper
      looper: "Looper",
      recordLoop: "Record Loop",
      stopRecording: "Stop Recording",
      playLoop: "Play Loop",
      stopLoop: "Stop Loop",
      clearLoop: "Clear Loop",
      
      // Mute/unmute
      mute: "Mute",
      unmute: "Unmute",
      delete: "Delete",
      
      // Calibration
      systemCalibration: "System Calibration",
      calibrationInstructions: "Please look directly at the camera and perform the following movements:",
      nodUpDown: "Nod your head up and down",
      moveLeftRight: "Move your head left and right",
      tiltHead: "Tilt your head to both sides",
      startingCalibration: "Starting calibration...",
      cancel: "Cancel",
      
      // Help
      help: "Help",
      instructions: "Instructions",
      welcomeMessage: "Welcome to HeadSynth - a synthesizer controlled by head movements!",
      howToUse: "How to Use:",
      activateCamera: "Activate Camera: Click the 'Start Camera' button to begin.",
      allowCameraAccess: "Allow Access: When prompted, allow camera access in your browser.",
      calibrateTip: "Calibration: Click 'Calibrate Camera' and follow the instructions.",
      useHeadMovements: "Use Head Movements: Control sounds with your head:",
      movementLeftRight: "Moving head left/right: Select notes",
      movementUpDown: "Moving head up/down: Control volume",
      movementTilt: "Tilting head: Control effects",
      
      // Troubleshooting
      troubleshooting: "Troubleshooting",
      cameraNotActivating: "If the camera doesn't activate, ensure your computer has a connected camera and it's not being used by another application.",
      noCameraPermission: "If your browser doesn't request camera access, check your browser's security settings.",
      cantSeeYourself: "If you can't see yourself in the camera, try refreshing the page and clicking 'Start Camera' again.",
      
      // Error messages
      error: "Error",
      close: "Close",
      
      // Success messages
      cameraActivated: "Camera successfully activated!",
      calibrationCompleted: "Calibration completed successfully!",
      
      // Credits
      developedBy: "Developed by",
      
      // Language
      languageSelector: "Language",
      english: "English",
      hebrew: "עברית"
    },
    he: {
      // Main UI
      appTitle: "הדסינת' - סינתיסייזר בשליטת ראש",
      startCamera: "הפעל מצלמה",
      stopCamera: "עצור מצלמה",
      calibrateCamera: "כיול מצלמה",
      activatingCamera: "מפעיל מצלמה...",
      cameraInstructions: "לחץ על 'הפעל מצלמה' כדי להתחיל",
      
      // Instrument & Scale
      basicSynth: "סינתיסייזר בסיסי",
      amSynth: "AM סינת",
      fmSynth: "FM סינת",
      pluck: "פלאק",
      piano: "פסנתר",
      
      majorScale: "סולם מז'ורי",
      minorScale: "סולם מינורי",
      pentatonicScale: "פנטטוני",
      bluesScale: "בלוז",
      chromaticScale: "כרומטי",
      
      // Controls
      volume: "עוצמת קול",
      reverb: "אפקט הדהוד",
      
      // Status
      note: "נוטה",
      mode: "מצב",
      playing: "נגינה",
      paused: "מושהה",
      headPosition: "מיקום ראש",
      
      // Looper
      looper: "לופר",
      recordLoop: "הקלט לופ",
      stopRecording: "עצור הקלטה",
      playLoop: "נגן לופ",
      stopLoop: "עצור לופ",
      clearLoop: "נקה לופ",
      
      // Mute/unmute
      mute: "השתק",
      unmute: "בטל השתקה",
      delete: "מחק",
      
      // Calibration
      systemCalibration: "כיול מערכת",
      calibrationInstructions: "אנא הבט ישירות למצלמה ואז בצע את התנועות הבאות:",
      nodUpDown: "הנהן בראשך למעלה ולמטה",
      moveLeftRight: "הזז את ראשך שמאלה וימינה",
      tiltHead: "הטה את ראשך לשני הכיוונים",
      startingCalibration: "מתחיל כיול...",
      cancel: "ביטול",
      
      // Help
      help: "עזרה",
      instructions: "הוראות שימוש",
      welcomeMessage: "ברוכים הבאים ל-HeadSynth - סינתיסייזר המופעל באמצעות תנועות ראש!",
      howToUse: "כיצד להשתמש:",
      activateCamera: "הפעל את המצלמה: לחץ על כפתור 'הפעל מצלמה' כדי להתחיל.",
      allowCameraAccess: "אשר גישה: כאשר הדפדפן מבקש, אשר את הגישה למצלמה.",
      calibrateTip: "כיול: לחץ על 'כיול מצלמה' ועקוב אחר ההוראות.",
      useHeadMovements: "השתמש בתנועות הראש: כדי לשלוט בצלילים:",
      movementLeftRight: "הזזת ראש שמאלה/ימינה: בחירת תווים",
      movementUpDown: "הזזת ראש למעלה/למטה: שליטה בעוצמה",
      movementTilt: "הטיית ראש: שליטה באפקטים",
      
      // Troubleshooting
      troubleshooting: "פתרון בעיות",
      cameraNotActivating: "אם המצלמה לא מופעלת, ודא שיש לך מצלמה מחוברת למחשב ושהיא אינה בשימוש על ידי תוכנה אחרת.",
      noCameraPermission: "אם הדפדפן לא מבקש גישה למצלמה, בדוק את הגדרות האבטחה של הדפדפן.",
      cantSeeYourself: "אם אינך רואה את עצמך במצלמה, נסה לרענן את הדף ולחץ שוב על 'הפעל מצלמה'.",
      
      // Error messages
      error: "שגיאה",
      close: "סגור",
      
      // Success messages
      cameraActivated: "המצלמה הופעלה בהצלחה!",
      calibrationCompleted: "הכיול הושלם בהצלחה!",
      
      // Credits
      developedBy: "פותח על ידי",
      
      // Language
      languageSelector: "שפה",
      english: "English",
      hebrew: "עברית"
    }
  };
  
  // Language utility functions
  export class LanguageManager {
    constructor() {
      this.currentLanguage = localStorage.getItem('headSynthLanguage') || 'en';
      this.listeners = [];
    }
    
    getCurrentLanguage() {
      return this.currentLanguage;
    }
    
    setLanguage(language) {
      if (translations[language]) {
        this.currentLanguage = language;
        localStorage.setItem('headSynthLanguage', language);
        
        // Update document direction based on language
        document.documentElement.dir = language === 'he' ? 'rtl' : 'ltr';
        document.documentElement.lang = language;
        
        // Notify all listeners
        this.notifyListeners();
        
        return true;
      }
      return false;
    }
    
    translate(key) {
      const langData = translations[this.currentLanguage];
      return langData[key] || translations.en[key] || key;
    }
    
    addChangeListener(listener) {
      if (typeof listener === 'function' && !this.listeners.includes(listener)) {
        this.listeners.push(listener);
      }
    }
    
    removeChangeListener(listener) {
      const index = this.listeners.indexOf(listener);
      if (index !== -1) {
        this.listeners.splice(index, 1);
      }
    }
    
    notifyListeners() {
      this.listeners.forEach(listener => {
        try {
          listener(this.currentLanguage);
        } catch (error) {
          console.error('Error in language change listener:', error);
        }
      });
    }
  }
  
  // Create a singleton instance
  export const languageManager = new LanguageManager();